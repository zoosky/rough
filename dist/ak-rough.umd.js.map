{"version":3,"file":"ak-rough.umd.js","sources":["../src/segment.js","../src/hachure.js","../src/path.js","../src/renderer.js","../src/generator.js","../src/canvas.js","../src/svg.js","../src/index.js"],"sourcesContent":["export function RoughSegmentRelation() {\r\n  return {\r\n    LEFT: 0,\r\n    RIGHT: 1,\r\n    INTERSECTS: 2,\r\n    AHEAD: 3,\r\n    BEHIND: 4,\r\n    SEPARATE: 5,\r\n    UNDEFINED: 6\r\n  };\r\n}\r\n\r\nexport class RoughSegment {\r\n  constructor(px1, py1, px2, py2) {\r\n    this.RoughSegmentRelationConst = RoughSegmentRelation();\r\n    this.px1 = px1;\r\n    this.py1 = py1;\r\n    this.px2 = px2;\r\n    this.py2 = py2;\r\n    this.xi = Number.MAX_VALUE;\r\n    this.yi = Number.MAX_VALUE;\r\n    this.a = py2 - py1;\r\n    this.b = px1 - px2;\r\n    this.c = px2 * py1 - px1 * py2;\r\n    this._undefined = ((this.a == 0) && (this.b == 0) && (this.c == 0));\r\n  }\r\n\r\n  isUndefined() {\r\n    return this._undefined;\r\n  }\r\n\r\n  compare(otherSegment) {\r\n    if (this.isUndefined() || otherSegment.isUndefined()) {\r\n      return this.RoughSegmentRelationConst.UNDEFINED;\r\n    }\r\n    var grad1 = Number.MAX_VALUE;\r\n    var grad2 = Number.MAX_VALUE;\r\n    var int1 = 0, int2 = 0;\r\n    var a = this.a, b = this.b, c = this.c;\r\n\r\n    if (Math.abs(b) > 0.00001) {\r\n      grad1 = -a / b;\r\n      int1 = -c / b;\r\n    }\r\n    if (Math.abs(otherSegment.b) > 0.00001) {\r\n      grad2 = -otherSegment.a / otherSegment.b;\r\n      int2 = -otherSegment.c / otherSegment.b;\r\n    }\r\n\r\n    if (grad1 == Number.MAX_VALUE) {\r\n      if (grad2 == Number.MAX_VALUE) {\r\n        if ((-c / a) != (-otherSegment.c / otherSegment.a)) {\r\n          return this.RoughSegmentRelationConst.SEPARATE;\r\n        }\r\n        if ((this.py1 >= Math.min(otherSegment.py1, otherSegment.py2)) && (this.py1 <= Math.max(otherSegment.py1, otherSegment.py2))) {\r\n          this.xi = this.px1;\r\n          this.yi = this.py1;\r\n          return this.RoughSegmentRelationConst.INTERSECTS;\r\n        }\r\n        if ((this.py2 >= Math.min(otherSegment.py1, otherSegment.py2)) && (this.py2 <= Math.max(otherSegment.py1, otherSegment.py2))) {\r\n          this.xi = this.px2;\r\n          this.yi = this.py2;\r\n          return this.RoughSegmentRelationConst.INTERSECTS;\r\n        }\r\n        return this.RoughSegmentRelationConst.SEPARATE;\r\n      }\r\n      this.xi = this.px1;\r\n      this.yi = (grad2 * this.xi + int2);\r\n      if (((this.py1 - this.yi) * (this.yi - this.py2) < -0.00001) || ((otherSegment.py1 - this.yi) * (this.yi - otherSegment.py2) < -0.00001)) {\r\n        return this.RoughSegmentRelationConst.SEPARATE;\r\n      }\r\n      if (Math.abs(otherSegment.a) < 0.00001) {\r\n        if ((otherSegment.px1 - this.xi) * (this.xi - otherSegment.px2) < -0.00001) {\r\n          return this.RoughSegmentRelationConst.SEPARATE;\r\n        }\r\n        return this.RoughSegmentRelationConst.INTERSECTS;\r\n      }\r\n      return this.RoughSegmentRelationConst.INTERSECTS;\r\n    }\r\n\r\n    if (grad2 == Number.MAX_VALUE) {\r\n      this.xi = otherSegment.px1;\r\n      this.yi = grad1 * this.xi + int1;\r\n      if (((otherSegment.py1 - this.yi) * (this.yi - otherSegment.py2) < -0.00001) || ((this.py1 - this.yi) * (this.yi - this.py2) < -0.00001)) {\r\n        return this.RoughSegmentRelationConst.SEPARATE;\r\n      }\r\n      if (Math.abs(a) < 0.00001) {\r\n        if ((this.px1 - this.xi) * (this.xi - this.px2) < -0.00001) {\r\n          return this.RoughSegmentRelationConst.SEPARATE;\r\n        }\r\n        return this.RoughSegmentRelationConst.INTERSECTS;\r\n      }\r\n      return this.RoughSegmentRelationConst.INTERSECTS;\r\n    }\r\n\r\n    if (grad1 == grad2) {\r\n      if (int1 != int2) {\r\n        return this.RoughSegmentRelationConst.SEPARATE;\r\n      }\r\n      if ((this.px1 >= Math.min(otherSegment.px1, otherSegment.px2)) && (this.px1 <= Math.max(otherSegment.py1, otherSegment.py2))) {\r\n        this.xi = this.px1;\r\n        this.yi = this.py1;\r\n        return this.RoughSegmentRelationConst.INTERSECTS;\r\n      }\r\n      if ((this.px2 >= Math.min(otherSegment.px1, otherSegment.px2)) && (this.px2 <= Math.max(otherSegment.px1, otherSegment.px2))) {\r\n        this.xi = this.px2;\r\n        this.yi = this.py2;\r\n        return this.RoughSegmentRelationConst.INTERSECTS;\r\n      }\r\n      return this.RoughSegmentRelationConst.SEPARATE;\r\n    }\r\n\r\n    this.xi = ((int2 - int1) / (grad1 - grad2));\r\n    this.yi = (grad1 * this.xi + int1);\r\n\r\n    if (((this.px1 - this.xi) * (this.xi - this.px2) < -0.00001) || ((otherSegment.px1 - this.xi) * (this.xi - otherSegment.px2) < -0.00001)) {\r\n      return this.RoughSegmentRelationConst.SEPARATE;\r\n    }\r\n    return this.RoughSegmentRelationConst.INTERSECTS;\r\n  }\r\n\r\n  getLength() {\r\n    return this._getLength(this.px1, this.py1, this.px2, this.py2);\r\n  }\r\n\r\n  _getLength(x1, y1, x2, y2) {\r\n    var dx = x2 - x1;\r\n    var dy = y2 - y1;\r\n    return Math.sqrt(dx * dx + dy * dy);\r\n  }\r\n}","import { RoughSegmentRelation, RoughSegment } from \"./segment\";\r\n\r\nexport class RoughHachureIterator {\r\n  constructor(top, bottom, left, right, gap, sinAngle, cosAngle, tanAngle) {\r\n    this.top = top;\r\n    this.bottom = bottom;\r\n    this.left = left;\r\n    this.right = right;\r\n    this.gap = gap;\r\n    this.sinAngle = sinAngle;\r\n    this.tanAngle = tanAngle;\r\n\r\n    if (Math.abs(sinAngle) < 0.0001) {\r\n      this.pos = left + gap;\r\n    } else if (Math.abs(sinAngle) > 0.9999) {\r\n      this.pos = top + gap;\r\n    } else {\r\n      this.deltaX = (bottom - top) * Math.abs(tanAngle);\r\n      this.pos = left - Math.abs(this.deltaX);\r\n      this.hGap = Math.abs(gap / cosAngle);\r\n      this.sLeft = new RoughSegment(left, bottom, left, top);\r\n      this.sRight = new RoughSegment(right, bottom, right, top);\r\n    }\r\n  }\r\n\r\n  getNextLine() {\r\n    if (Math.abs(this.sinAngle) < 0.0001) {\r\n      if (this.pos < this.right) {\r\n        let line = [this.pos, this.top, this.pos, this.bottom];\r\n        this.pos += this.gap;\r\n        return line;\r\n      }\r\n    } else if (Math.abs(this.sinAngle) > 0.9999) {\r\n      if (this.pos < this.bottom) {\r\n        let line = [this.left, this.pos, this.right, this.pos];\r\n        this.pos += this.gap;\r\n        return line;\r\n      }\r\n    } else {\r\n      let xLower = this.pos - this.deltaX / 2;\r\n      let xUpper = this.pos + this.deltaX / 2;\r\n      let yLower = this.bottom;\r\n      let yUpper = this.top;\r\n      if (this.pos < (this.right + this.deltaX)) {\r\n        while (((xLower < this.left) && (xUpper < this.left)) || ((xLower > this.right) && (xUpper > this.right))) {\r\n          this.pos += this.hGap;\r\n          xLower = this.pos - this.deltaX / 2;\r\n          xUpper = this.pos + this.deltaX / 2;\r\n          if (this.pos > (this.right + this.deltaX)) {\r\n            return null;\r\n          }\r\n        }\r\n        let s = new RoughSegment(xLower, yLower, xUpper, yUpper);\r\n        if (s.compare(this.sLeft) == RoughSegmentRelation().INTERSECTS) {\r\n          xLower = s.xi;\r\n          yLower = s.yi;\r\n        }\r\n        if (s.compare(this.sRight) == RoughSegmentRelation().INTERSECTS) {\r\n          xUpper = s.xi;\r\n          yUpper = s.yi;\r\n        }\r\n        if (this.tanAngle > 0) {\r\n          xLower = this.right - (xLower - this.left);\r\n          xUpper = this.right - (xUpper - this.left);\r\n        }\r\n        let line = [xLower, yLower, xUpper, yUpper];\r\n        this.pos += this.hGap;\r\n        return line;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n}","class PathToken {\r\n  constructor(type, text) {\r\n    this.type = type;\r\n    this.text = text;\r\n  }\r\n  isType(type) {\r\n    return this.type === type;\r\n  }\r\n}\r\n\r\nclass ParsedPath {\r\n  constructor(d) {\r\n    this.PARAMS = {\r\n      A: [\"rx\", \"ry\", \"x-axis-rotation\", \"large-arc-flag\", \"sweep-flag\", \"x\", \"y\"],\r\n      a: [\"rx\", \"ry\", \"x-axis-rotation\", \"large-arc-flag\", \"sweep-flag\", \"x\", \"y\"],\r\n      C: [\"x1\", \"y1\", \"x2\", \"y2\", \"x\", \"y\"],\r\n      c: [\"x1\", \"y1\", \"x2\", \"y2\", \"x\", \"y\"],\r\n      H: [\"x\"],\r\n      h: [\"x\"],\r\n      L: [\"x\", \"y\"],\r\n      l: [\"x\", \"y\"],\r\n      M: [\"x\", \"y\"],\r\n      m: [\"x\", \"y\"],\r\n      Q: [\"x1\", \"y1\", \"x\", \"y\"],\r\n      q: [\"x1\", \"y1\", \"x\", \"y\"],\r\n      S: [\"x2\", \"y2\", \"x\", \"y\"],\r\n      s: [\"x2\", \"y2\", \"x\", \"y\"],\r\n      T: [\"x\", \"y\"],\r\n      t: [\"x\", \"y\"],\r\n      V: [\"y\"],\r\n      v: [\"y\"],\r\n      Z: [],\r\n      z: []\r\n    };\r\n    this.COMMAND = 0;\r\n    this.NUMBER = 1;\r\n    this.EOD = 2;\r\n    this.segments = [];\r\n    this.d = d || \"\";\r\n    this.parseData(d);\r\n    this.processPoints();\r\n  }\r\n\r\n  loadFromSegments(segments) {\r\n    this.segments = segments;\r\n    this.processPoints();\r\n  }\r\n\r\n  processPoints() {\r\n    let first = null, prev = null, currentPoint = [0, 0];\r\n    for (let i = 0; i < this.segments.length; i++) {\r\n      let s = this.segments[i];\r\n      switch (s.key) {\r\n        case 'M':\r\n        case 'L':\r\n        case 'T':\r\n          s.point = [s.data[0], s.data[1]];\r\n          break;\r\n        case 'm':\r\n        case 'l':\r\n        case 't':\r\n          s.point = [s.data[0] + currentPoint[0], s.data[1] + currentPoint[1]];\r\n          break;\r\n        case 'H':\r\n          s.point = [s.data[0], currentPoint[1]];\r\n          break;\r\n        case 'h':\r\n          s.point = [s.data[0] + currentPoint[0], currentPoint[1]];\r\n          break;\r\n        case 'V':\r\n          s.point = [currentPoint[0], s.data[0]];\r\n          break;\r\n        case 'v':\r\n          s.point = [currentPoint[0], s.data[0] + currentPoint[1]];\r\n          break;\r\n        case 'z':\r\n        case 'Z':\r\n          if (first) {\r\n            s.point = [first[0], first[1]];\r\n          }\r\n          break;\r\n        case 'C':\r\n          s.point = [s.data[4], s.data[5]];\r\n          break;\r\n        case 'c':\r\n          s.point = [s.data[4] + currentPoint[0], s.data[5] + currentPoint[1]];\r\n          break;\r\n        case 'S':\r\n          s.point = [s.data[2], s.data[3]];\r\n          break;\r\n        case 's':\r\n          s.point = [s.data[2] + currentPoint[0], s.data[3] + currentPoint[1]];\r\n          break;\r\n        case 'Q':\r\n          s.point = [s.data[2], s.data[3]];\r\n          break;\r\n        case 'q':\r\n          s.point = [s.data[2] + currentPoint[0], s.data[3] + currentPoint[1]];\r\n          break;\r\n        case 'A':\r\n          s.point = [s.data[5], s.data[6]];\r\n          break;\r\n        case 'a':\r\n          s.point = [s.data[5] + currentPoint[0], s.data[6] + currentPoint[1]];\r\n          break;\r\n      }\r\n      if (s.key === 'm' || s.key === 'M') {\r\n        first = null;\r\n      }\r\n      if (s.point) {\r\n        currentPoint = s.point;\r\n        if (!first) {\r\n          first = s.point;\r\n        }\r\n      }\r\n      if (s.key === 'z' || s.key === 'Z') {\r\n        first = null;\r\n      }\r\n      prev = s;\r\n    }\r\n  }\r\n\r\n  get closed() {\r\n    if (typeof this._closed === 'undefined') {\r\n      this._closed = false;\r\n      for (let s of this.segments) {\r\n        if (s.key.toLowerCase() === 'z') {\r\n          this._closed = true;\r\n        }\r\n      }\r\n    }\r\n    return this._closed;\r\n  }\r\n\r\n  parseData(d) {\r\n    var tokens = this.tokenize(d);\r\n    var index = 0;\r\n    var token = tokens[index];\r\n    var mode = \"BOD\";\r\n    this.segments = new Array();\r\n    while (!token.isType(this.EOD)) {\r\n      var param_length;\r\n      var params = new Array();\r\n      if (mode == \"BOD\") {\r\n        if (token.text == \"M\" || token.text == \"m\") {\r\n          index++;\r\n          param_length = this.PARAMS[token.text].length;\r\n          mode = token.text;\r\n        } else {\r\n          return this.parseData('M0,0' + d);\r\n        }\r\n      } else {\r\n        if (token.isType(this.NUMBER)) {\r\n          param_length = this.PARAMS[mode].length;\r\n        } else {\r\n          index++;\r\n          param_length = this.PARAMS[token.text].length;\r\n          mode = token.text;\r\n        }\r\n      }\r\n\r\n      if ((index + param_length) < tokens.length) {\r\n        for (var i = index; i < index + param_length; i++) {\r\n          var number = tokens[i];\r\n          if (number.isType(this.NUMBER)) {\r\n            params[params.length] = number.text;\r\n          }\r\n          else {\r\n            console.error(\"Parameter type is not a number: \" + mode + \",\" + number.text);\r\n            return;\r\n          }\r\n        }\r\n        var segment;\r\n        if (this.PARAMS[mode]) {\r\n          segment = { key: mode, data: params };\r\n        } else {\r\n          console.error(\"Unsupported segment type: \" + mode);\r\n          return;\r\n        }\r\n        this.segments.push(segment);\r\n        index += param_length;\r\n        token = tokens[index];\r\n        if (mode == \"M\") mode = \"L\";\r\n        if (mode == \"m\") mode = \"l\";\r\n      } else {\r\n        console.error(\"Path data ended before all parameters were found\");\r\n      }\r\n    }\r\n  }\r\n\r\n  tokenize(d) {\r\n    var tokens = new Array();\r\n    while (d != \"\") {\r\n      if (d.match(/^([ \\t\\r\\n,]+)/)) {\r\n        d = d.substr(RegExp.$1.length);\r\n      } else if (d.match(/^([aAcChHlLmMqQsStTvVzZ])/)) {\r\n        tokens[tokens.length] = new PathToken(this.COMMAND, RegExp.$1);\r\n        d = d.substr(RegExp.$1.length);\r\n      } else if (d.match(/^(([-+]?[0-9]+(\\.[0-9]*)?|[-+]?\\.[0-9]+)([eE][-+]?[0-9]+)?)/)) {\r\n        tokens[tokens.length] = new PathToken(this.NUMBER, parseFloat(RegExp.$1));\r\n        d = d.substr(RegExp.$1.length);\r\n      } else {\r\n        console.error(\"Unrecognized segment command: \" + d);\r\n        return null;\r\n      }\r\n    }\r\n    tokens[tokens.length] = new PathToken(this.EOD, null);\r\n    return tokens;\r\n  }\r\n}\r\n\r\nexport class RoughPath {\r\n  constructor(d) {\r\n    this.d = d;\r\n    this.parsed = new ParsedPath(d);\r\n    this._position = [0, 0];\r\n    this.bezierReflectionPoint = null;\r\n    this.quadReflectionPoint = null;\r\n    this._first = null;\r\n  }\r\n\r\n  get segments() {\r\n    return this.parsed.segments;\r\n  }\r\n\r\n  get closed() {\r\n    return this.parsed.closed;\r\n  }\r\n\r\n  get linearPoints() {\r\n    if (!this._linearPoints) {\r\n      const lp = [];\r\n      let points = [];\r\n      for (let s of this.parsed.segments) {\r\n        let key = s.key.toLowerCase();\r\n        if (key === 'm' || key === 'z') {\r\n          if (points.length) {\r\n            lp.push(points);\r\n            points = [];\r\n          }\r\n          if (key === 'z') {\r\n            continue;\r\n          }\r\n        }\r\n        if (s.point) {\r\n          points.push(s.point);\r\n        }\r\n      }\r\n      if (points.length) {\r\n        lp.push(points);\r\n        points = [];\r\n      }\r\n      this._linearPoints = lp;\r\n    }\r\n    return this._linearPoints;\r\n  }\r\n\r\n  get first() {\r\n    return this._first;\r\n  }\r\n\r\n  set first(v) {\r\n    this._first = v;\r\n  }\r\n\r\n  setPosition(x, y) {\r\n    this._position = [x, y];\r\n    if (!this._first) {\r\n      this._first = [x, y];\r\n    }\r\n  }\r\n\r\n  get position() {\r\n    return this._position;\r\n  }\r\n\r\n  get x() {\r\n    return this._position[0];\r\n  }\r\n\r\n  get y() {\r\n    return this._position[1];\r\n  }\r\n}\r\n\r\nexport class RoughArcConverter {\r\n  // Algorithm as described in https://www.w3.org/TR/SVG/implnote.html\r\n  // Code adapted from nsSVGPathDataParser.cpp in Mozilla \r\n  // https://hg.mozilla.org/mozilla-central/file/17156fbebbc8/content/svg/content/src/nsSVGPathDataParser.cpp#l887\r\n  constructor(from, to, radii, angle, largeArcFlag, sweepFlag) {\r\n    const radPerDeg = Math.PI / 180;\r\n    this._segIndex = 0;\r\n    this._numSegs = 0;\r\n    if (from[0] == to[0] && from[1] == to[1]) {\r\n      return;\r\n    }\r\n    this._rx = Math.abs(radii[0]);\r\n    this._ry = Math.abs(radii[1]);\r\n    this._sinPhi = Math.sin(angle * radPerDeg);\r\n    this._cosPhi = Math.cos(angle * radPerDeg);\r\n    var x1dash = this._cosPhi * (from[0] - to[0]) / 2.0 + this._sinPhi * (from[1] - to[1]) / 2.0;\r\n    var y1dash = -this._sinPhi * (from[0] - to[0]) / 2.0 + this._cosPhi * (from[1] - to[1]) / 2.0;\r\n    var root;\r\n    var numerator = this._rx * this._rx * this._ry * this._ry - this._rx * this._rx * y1dash * y1dash - this._ry * this._ry * x1dash * x1dash;\r\n    if (numerator < 0) {\r\n      let s = Math.sqrt(1 - (numerator / (this._rx * this._rx * this._ry * this._ry)));\r\n      this._rx = s;\r\n      this._ry = s;\r\n      root = 0;\r\n    } else {\r\n      root = (largeArcFlag == sweepFlag ? -1.0 : 1.0) *\r\n        Math.sqrt(numerator / (this._rx * this._rx * y1dash * y1dash + this._ry * this._ry * x1dash * x1dash));\r\n    }\r\n    let cxdash = root * this._rx * y1dash / this._ry;\r\n    let cydash = -root * this._ry * x1dash / this._rx;\r\n    this._C = [0, 0];\r\n    this._C[0] = this._cosPhi * cxdash - this._sinPhi * cydash + (from[0] + to[0]) / 2.0;\r\n    this._C[1] = this._sinPhi * cxdash + this._cosPhi * cydash + (from[1] + to[1]) / 2.0;\r\n    this._theta = this.calculateVectorAngle(1.0, 0.0, (x1dash - cxdash) / this._rx, (y1dash - cydash) / this._ry);\r\n    let dtheta = this.calculateVectorAngle((x1dash - cxdash) / this._rx, (y1dash - cydash) / this._ry, (-x1dash - cxdash) / this._rx, (-y1dash - cydash) / this._ry);\r\n    if ((!sweepFlag) && (dtheta > 0)) {\r\n      dtheta -= 2 * Math.PI;\r\n    } else if (sweepFlag && (dtheta < 0)) {\r\n      dtheta += 2 * Math.PI;\r\n    }\r\n    this._numSegs = Math.ceil(Math.abs(dtheta / (Math.PI / 2)));\r\n    this._delta = dtheta / this._numSegs;\r\n    this._T = (8 / 3) * Math.sin(this._delta / 4) * Math.sin(this._delta / 4) / Math.sin(this._delta / 2);\r\n    this._from = from;\r\n  }\r\n\r\n  getNextSegment() {\r\n    var cp1, cp2, to;\r\n    if (this._segIndex == this._numSegs) {\r\n      return null;\r\n    }\r\n    let cosTheta1 = Math.cos(this._theta);\r\n    let sinTheta1 = Math.sin(this._theta);\r\n    let theta2 = this._theta + this._delta;\r\n    let cosTheta2 = Math.cos(theta2);\r\n    let sinTheta2 = Math.sin(theta2);\r\n\r\n    to = [\r\n      this._cosPhi * this._rx * cosTheta2 - this._sinPhi * this._ry * sinTheta2 + this._C[0],\r\n      this._sinPhi * this._rx * cosTheta2 + this._cosPhi * this._ry * sinTheta2 + this._C[1]\r\n    ];\r\n    cp1 = [\r\n      this._from[0] + this._T * (- this._cosPhi * this._rx * sinTheta1 - this._sinPhi * this._ry * cosTheta1),\r\n      this._from[1] + this._T * (- this._sinPhi * this._rx * sinTheta1 + this._cosPhi * this._ry * cosTheta1)\r\n    ];\r\n    cp2 = [\r\n      to[0] + this._T * (this._cosPhi * this._rx * sinTheta2 + this._sinPhi * this._ry * cosTheta2),\r\n      to[1] + this._T * (this._sinPhi * this._rx * sinTheta2 - this._cosPhi * this._ry * cosTheta2)\r\n    ];\r\n\r\n    this._theta = theta2;\r\n    this._from = [to[0], to[1]];\r\n    this._segIndex++;\r\n\r\n    return {\r\n      cp1: cp1,\r\n      cp2: cp2,\r\n      to: to\r\n    };\r\n  }\r\n\r\n  calculateVectorAngle(ux, uy, vx, vy) {\r\n    let ta = Math.atan2(uy, ux);\r\n    let tb = Math.atan2(vy, vx);\r\n    if (tb >= ta)\r\n      return tb - ta;\r\n    return 2 * Math.PI - (ta - tb);\r\n  }\r\n}\r\n\r\nexport class PathFitter {\r\n  constructor(sets, closed) {\r\n    this.sets = sets;\r\n    this.closed = closed;\r\n  }\r\n\r\n  fit(simplification) {\r\n    let outSets = [];\r\n    for (const set of this.sets) {\r\n      let length = set.length;\r\n      let estLength = Math.floor(simplification * length);\r\n      if (estLength < 5) {\r\n        if (length <= 5) {\r\n          continue;\r\n        }\r\n        estLength = 5;\r\n      }\r\n      outSets.push(this.reduce(set, estLength));\r\n    }\r\n\r\n    let d = '';\r\n    for (const set of outSets) {\r\n      for (let i = 0; i < set.length; i++) {\r\n        let point = set[i];\r\n        if (i === 0) {\r\n          d += 'M' + point[0] + \",\" + point[1];\r\n        } else {\r\n          d += 'L' + point[0] + \",\" + point[1];\r\n        }\r\n      }\r\n      if (this.closed) {\r\n        d += 'z ';\r\n      }\r\n    }\r\n    return d;\r\n  }\r\n\r\n  distance(p1, p2) {\r\n    return Math.sqrt(Math.pow(p1[0] - p2[0], 2) + Math.pow(p1[1] - p2[1], 2));\r\n  }\r\n\r\n  reduce(set, count) {\r\n    if (set.length <= count) {\r\n      return set;\r\n    }\r\n    let points = set.slice(0);\r\n    while (points.length > count) {\r\n      let areas = [];\r\n      let minArea = -1;\r\n      let minIndex = -1;\r\n      for (let i = 1; i < (points.length - 1); i++) {\r\n        let a = this.distance(points[i - 1], points[i]);\r\n        let b = this.distance(points[i], points[i + 1]);\r\n        let c = this.distance(points[i - 1], points[i + 1]);\r\n        let s = (a + b + c) / 2.0;\r\n        let area = Math.sqrt(s * (s - a) * (s - b) * (s - c));\r\n        areas.push(area);\r\n        if ((minArea < 0) || (area < minArea)) {\r\n          minArea = area;\r\n          minIndex = i;\r\n        }\r\n      }\r\n      if (minIndex > 0) {\r\n        points.splice(minIndex, 1);\r\n      } else {\r\n        break;\r\n      }\r\n    }\r\n    return points;\r\n  }\r\n}","import { RoughHachureIterator } from './hachure.js';\r\nimport { RoughSegmentRelation, RoughSegment } from './segment.js';\r\nimport { RoughPath, RoughArcConverter, PathFitter } from './path.js';\r\n\r\nexport class RoughRenderer {\r\n  line(x1, y1, x2, y2, o) {\r\n    let ops = this._doubleLine(x1, y1, x2, y2, o);\r\n    return { type: 'path', ops };\r\n  }\r\n\r\n  linearPath(points, close, o) {\r\n    const len = (points || []).length;\r\n    if (len > 2) {\r\n      let ops = [];\r\n      for (let i = 0; i < (len - 1); i++) {\r\n        ops = ops.concat(this._doubleLine(points[i][0], points[i][1], points[i + 1][0], points[i + 1][1], o));\r\n      }\r\n      if (close) {\r\n        ops = ops.concat(this._doubleLine(points[len - 1][0], points[len - 1][1], points[0][0], points[0][1], o));\r\n      }\r\n      return { type: 'path', ops };\r\n    } else if (len === 2) {\r\n      return this.line(points[0][0], points[0][1], points[1][0], points[1][1], o);\r\n    }\r\n  }\r\n\r\n  polygon(points, o) {\r\n    return this.linearPath(points, true, o);\r\n  }\r\n\r\n  rectangle(x, y, width, height, o) {\r\n    let points = [\r\n      [x, y], [x + width, y], [x + width, y + height], [x, y + height]\r\n    ];\r\n    return this.polygon(points, o);\r\n  }\r\n\r\n  curve(points, o) {\r\n    let o1 = this._curveWithOffset(points, 1 * (1 + o.roughness * 0.2), o);\r\n    let o2 = this._curveWithOffset(points, 1.5 * (1 + o.roughness * 0.22), o);\r\n    return { type: 'path', ops: o1.concat(o2) };\r\n  }\r\n\r\n  ellipse(x, y, width, height, o) {\r\n    const increment = (Math.PI * 2) / o.curveStepCount;\r\n    let rx = Math.abs(width / 2);\r\n    let ry = Math.abs(height / 2);\r\n    rx += this._getOffset(-rx * 0.05, rx * 0.05, o);\r\n    ry += this._getOffset(-ry * 0.05, ry * 0.05, o);\r\n    let o1 = this._ellipse(increment, x, y, rx, ry, 1, increment * this._getOffset(0.1, this._getOffset(0.4, 1, o), o), o);\r\n    let o2 = this._ellipse(increment, x, y, rx, ry, 1.5, 0, o);\r\n    return { type: 'path', ops: o1.concat(o2) };\r\n  }\r\n\r\n  arc(x, y, width, height, start, stop, closed, roughClosure, o) {\r\n    let cx = x;\r\n    let cy = y;\r\n    let rx = Math.abs(width / 2);\r\n    let ry = Math.abs(height / 2);\r\n    rx += this._getOffset(-rx * 0.01, rx * 0.01, o);\r\n    ry += this._getOffset(-ry * 0.01, ry * 0.01, o);\r\n    let strt = start;\r\n    let stp = stop;\r\n    while (strt < 0) {\r\n      strt += Math.PI * 2;\r\n      stp += Math.PI * 2;\r\n    }\r\n    if ((stp - strt) > (Math.PI * 2)) {\r\n      strt = 0;\r\n      stp = Math.PI * 2;\r\n    }\r\n    let ellipseInc = (Math.PI * 2) / o.curveStepCount;\r\n    let arcInc = Math.min(ellipseInc / 2, (stp - strt) / 2);\r\n    let o1 = this._arc(arcInc, cx, cy, rx, ry, strt, stp, 1, o);\r\n    let o2 = this._arc(arcInc, cx, cy, rx, ry, strt, stp, 1.5, o);\r\n    let ops = o1.concat(o2);\r\n    if (closed) {\r\n      if (roughClosure) {\r\n        ops = ops.concat(this._doubleLine(cx, cy, cx + rx * Math.cos(strt), cy + ry * Math.sin(strt), o));\r\n        ops = ops.concat(this._doubleLine(cx, cy, cx + rx * Math.cos(stp), cy + ry * Math.sin(stp), o));\r\n      } else {\r\n        ops.push({ op: 'lineTo', data: [cx, cy] });\r\n        ops.push({ op: 'lineTo', data: [cx + rx * Math.cos(strt), cy + ry * Math.sin(strt)] });\r\n      }\r\n    }\r\n    return { type: 'path', ops };\r\n  }\r\n\r\n  hachureFillArc(x, y, width, height, start, stop, o) {\r\n    let cx = x;\r\n    let cy = y;\r\n    let rx = Math.abs(width / 2);\r\n    let ry = Math.abs(height / 2);\r\n    rx += this._getOffset(-rx * 0.01, rx * 0.01, o);\r\n    ry += this._getOffset(-ry * 0.01, ry * 0.01, o);\r\n    let strt = start;\r\n    let stp = stop;\r\n    while (strt < 0) {\r\n      strt += Math.PI * 2;\r\n      stp += Math.PI * 2;\r\n    }\r\n    if ((stp - strt) > (Math.PI * 2)) {\r\n      strt = 0;\r\n      stp = Math.PI * 2;\r\n    }\r\n    let increment = (stp - strt) / o.curveStepCount;\r\n    let offset = 1;\r\n    let xc = [], yc = [];\r\n    for (let angle = strt; angle <= stp; angle = angle + increment) {\r\n      xc.push(cx + rx * Math.cos(angle));\r\n      yc.push(cy + ry * Math.sin(angle));\r\n    }\r\n    xc.push(cx + rx * Math.cos(stp));\r\n    yc.push(cy + ry * Math.sin(stp));\r\n    xc.push(cx);\r\n    yc.push(cy);\r\n    return this.hachureFillShape(xc, yc, o);\r\n  }\r\n\r\n  solidFillShape(xCoords, yCoords, o) {\r\n    let ops = [];\r\n    if (xCoords && yCoords && xCoords.length && yCoords.length && xCoords.length === yCoords.length) {\r\n      let offset = o.maxRandomnessOffset || 0;\r\n      const len = xCoords.length;\r\n      if (len > 2) {\r\n        ops.push({ op: 'move', data: [xCoords[0] + this._getOffset(-offset, offset, o), yCoords[0] + this._getOffset(-offset, offset, o)] });\r\n        for (var i = 1; i < len; i++) {\r\n          ops.push({ op: 'lineTo', data: [xCoords[i] + this._getOffset(-offset, offset, o), yCoords[i] + this._getOffset(-offset, offset, o)] });\r\n        }\r\n      }\r\n    }\r\n    return { type: 'fillPath', ops };\r\n  }\r\n\r\n  hachureFillShape(xCoords, yCoords, o) {\r\n    let ops = [];\r\n    if (xCoords && yCoords && xCoords.length && yCoords.length) {\r\n      let left = xCoords[0];\r\n      let right = xCoords[0];\r\n      let top = yCoords[0];\r\n      let bottom = yCoords[0];\r\n      for (let i = 1; i < xCoords.length; i++) {\r\n        left = Math.min(left, xCoords[i]);\r\n        right = Math.max(right, xCoords[i]);\r\n        top = Math.min(top, yCoords[i]);\r\n        bottom = Math.max(bottom, yCoords[i]);\r\n      }\r\n      const angle = o.hachureAngle;\r\n      let gap = o.hachureGap;\r\n      if (gap < 0) {\r\n        gap = o.strokeWidth * 4;\r\n      }\r\n      gap = Math.max(gap, 0.1);\r\n\r\n      const radPerDeg = Math.PI / 180;\r\n      const hachureAngle = (angle % 180) * radPerDeg;\r\n      const cosAngle = Math.cos(hachureAngle);\r\n      const sinAngle = Math.sin(hachureAngle);\r\n      const tanAngle = Math.tan(hachureAngle);\r\n\r\n      const it = new RoughHachureIterator(top - 1, bottom + 1, left - 1, right + 1, gap, sinAngle, cosAngle, tanAngle);\r\n      let rectCoords;\r\n      while ((rectCoords = it.getNextLine()) != null) {\r\n        let lines = this._getIntersectingLines(rectCoords, xCoords, yCoords);\r\n        for (let i = 0; i < lines.length; i++) {\r\n          if (i < (lines.length - 1)) {\r\n            let p1 = lines[i];\r\n            let p2 = lines[i + 1];\r\n            ops = ops.concat(this._doubleLine(p1[0], p1[1], p2[0], p2[1], o));\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return { type: 'fillSketch', ops };\r\n  }\r\n\r\n  hachureFillEllipse(cx, cy, width, height, o) {\r\n    let ops = [];\r\n    let rx = Math.abs(width / 2);\r\n    let ry = Math.abs(height / 2);\r\n    rx += this._getOffset(-rx * 0.05, rx * 0.05, o);\r\n    ry += this._getOffset(-ry * 0.05, ry * 0.05, o);\r\n    let angle = o.hachureAngle;\r\n    let gap = o.hachureGap;\r\n    if (gap <= 0) {\r\n      gap = o.strokeWidth * 4;\r\n    }\r\n    let fweight = o.fillWeight;\r\n    if (fweight < 0) {\r\n      fweight = o.strokeWidth / 2;\r\n    }\r\n    const radPerDeg = Math.PI / 180;\r\n    let hachureAngle = (angle % 180) * radPerDeg;\r\n    let tanAngle = Math.tan(hachureAngle);\r\n    let aspectRatio = ry / rx;\r\n    let hyp = Math.sqrt(aspectRatio * tanAngle * aspectRatio * tanAngle + 1);\r\n    let sinAnglePrime = aspectRatio * tanAngle / hyp;\r\n    let cosAnglePrime = 1 / hyp;\r\n    let gapPrime = gap / ((rx * ry / Math.sqrt((ry * cosAnglePrime) * (ry * cosAnglePrime) + (rx * sinAnglePrime) * (rx * sinAnglePrime))) / rx);\r\n    let halfLen = Math.sqrt((rx * rx) - (cx - rx + gapPrime) * (cx - rx + gapPrime));\r\n    for (var xPos = cx - rx + gapPrime; xPos < cx + rx; xPos += gapPrime) {\r\n      halfLen = Math.sqrt((rx * rx) - (cx - xPos) * (cx - xPos));\r\n      let p1 = this._affine(xPos, cy - halfLen, cx, cy, sinAnglePrime, cosAnglePrime, aspectRatio);\r\n      let p2 = this._affine(xPos, cy + halfLen, cx, cy, sinAnglePrime, cosAnglePrime, aspectRatio);\r\n      ops = ops.concat(this._doubleLine(p1[0], p1[1], p2[0], p2[1], o));\r\n    }\r\n    return { type: 'fillSketch', ops };\r\n  }\r\n\r\n  svgPath(path, o) {\r\n    path = (path || '').replace(/\\n/g, \" \").replace(/(-\\s)/g, \"-\").replace(\"/(\\s\\s)/g\", \" \");\r\n    let p = new RoughPath(path);\r\n    if (o.simplification) {\r\n      let fitter = new PathFitter(p.linearPoints, p.closed);\r\n      let d = fitter.fit(o.simplification);\r\n      p = new RoughPath(d);\r\n    }\r\n    let ops = [];\r\n    let segments = p.segments || [];\r\n    for (let i = 0; i < segments.length; i++) {\r\n      let s = segments[i];\r\n      let prev = i > 0 ? segments[i - 1] : null;\r\n      let opList = this._processSegment(p, s, prev, o);\r\n      if (opList && opList.length) {\r\n        ops = ops.concat(opList);\r\n      }\r\n    }\r\n    return { type: 'path', ops };\r\n  }\r\n\r\n  // privates\r\n\r\n  _bezierTo(x1, y1, x2, y2, x, y, path, o) {\r\n    let ops = [];\r\n    let ros = [o.maxRandomnessOffset || 1, (o.maxRandomnessOffset || 1) + 0.5];\r\n    let f = null;\r\n    for (let i = 0; i < 2; i++) {\r\n      if (i === 0) {\r\n        ops.push({ op: 'move', data: [path.x, path.y] });\r\n      } else {\r\n        ops.push({ op: 'move', data: [path.x + this._getOffset(-ros[0], ros[0], o), path.y + this._getOffset(-ros[0], ros[0], o)] });\r\n      }\r\n      f = [x + this._getOffset(-ros[i], ros[i], o), y + this._getOffset(-ros[i], ros[i], o)];\r\n      ops.push({\r\n        op: 'bcurveTo', data: [\r\n          x1 + this._getOffset(-ros[i], ros[i], o), y1 + this._getOffset(-ros[i], ros[i], o),\r\n          x2 + this._getOffset(-ros[i], ros[i], o), y2 + this._getOffset(-ros[i], ros[i], o),\r\n          f[0], f[1]\r\n        ]\r\n      });\r\n    }\r\n    path.setPosition(f[0], f[1]);\r\n    return ops;\r\n  }\r\n\r\n  _processSegment(path, seg, prevSeg, o) {\r\n    let ops = [];\r\n    switch (seg.key) {\r\n      case 'M':\r\n      case 'm': {\r\n        let delta = seg.key === 'm';\r\n        if (seg.data.length >= 2) {\r\n          let x = +seg.data[0];\r\n          let y = +seg.data[1];\r\n          if (delta) {\r\n            x += path.x;\r\n            y += path.y;\r\n          }\r\n          let ro = 1 * (o.maxRandomnessOffset || 0);\r\n          x = x + this._getOffset(-ro, ro, o);\r\n          y = y + this._getOffset(-ro, ro, o);\r\n          path.setPosition(x, y);\r\n          ops.push({ op: 'move', data: [x, y] });\r\n        }\r\n        break;\r\n      }\r\n      case 'L':\r\n      case 'l': {\r\n        let delta = seg.key === 'l';\r\n        if (seg.data.length >= 2) {\r\n          let x = +seg.data[0];\r\n          let y = +seg.data[1];\r\n          if (delta) {\r\n            x += path.x;\r\n            y += path.y;\r\n          }\r\n          ops = ops.concat(this._doubleLine(path.x, path.y, x, y, o));\r\n          path.setPosition(x, y);\r\n        }\r\n        break;\r\n      }\r\n      case 'H':\r\n      case 'h': {\r\n        const delta = seg.key === 'h';\r\n        if (seg.data.length) {\r\n          let x = +seg.data[0];\r\n          if (delta) {\r\n            x += path.x;\r\n          }\r\n          ops = ops.concat(this._doubleLine(path.x, path.y, x, path.y, o));\r\n          path.setPosition(x, path.y);\r\n        }\r\n        break;\r\n      }\r\n      case 'V':\r\n      case 'v': {\r\n        const delta = seg.key === 'v';\r\n        if (seg.data.length) {\r\n          let y = +seg.data[0];\r\n          if (delta) {\r\n            y += path.y;\r\n          }\r\n          ops = ops.concat(this._doubleLine(path.x, path.y, path.x, y, o));\r\n          path.setPosition(path.x, y);\r\n        }\r\n        break;\r\n      }\r\n      case 'Z':\r\n      case 'z': {\r\n        if (path.first) {\r\n          ops = ops.concat(this._doubleLine(path.x, path.y, path.first[0], path.first[1], o));\r\n          path.setPosition(path.first[0], path.first[1]);\r\n          path.first = null;\r\n        }\r\n        break;\r\n      }\r\n      case 'C':\r\n      case 'c': {\r\n        const delta = seg.key === 'c';\r\n        if (seg.data.length >= 6) {\r\n          let x1 = +seg.data[0];\r\n          let y1 = +seg.data[1];\r\n          let x2 = +seg.data[2];\r\n          let y2 = +seg.data[3];\r\n          let x = +seg.data[4];\r\n          let y = +seg.data[5];\r\n          if (delta) {\r\n            x1 += path.x;\r\n            x2 += path.x;\r\n            x += path.x;\r\n            y1 += path.y;\r\n            y2 += path.y;\r\n            y += path.y;\r\n          }\r\n          let ob = this._bezierTo(x1, y1, x2, y2, x, y, path, o);\r\n          ops = ops.concat(ob);\r\n          path.bezierReflectionPoint = [x + (x - x2), y + (y - y2)];\r\n        }\r\n        break;\r\n      }\r\n      case 'S':\r\n      case 's': {\r\n        const delta = seg.key === 's';\r\n        if (seg.data.length >= 4) {\r\n          let x2 = +seg.data[0];\r\n          let y2 = +seg.data[1];\r\n          let x = +seg.data[2];\r\n          let y = +seg.data[3];\r\n          if (delta) {\r\n            x2 += path.x;\r\n            x += path.x;\r\n            y2 += path.y;\r\n            y += path.y;\r\n          }\r\n          let x1 = x2;\r\n          let y1 = y2;\r\n          let prevKey = prevSeg ? prevSeg.key : \"\";\r\n          var ref = null;\r\n          if (prevKey == 'c' || prevKey == 'C' || prevKey == 's' || prevKey == 'S') {\r\n            ref = path.bezierReflectionPoint;\r\n          }\r\n          if (ref) {\r\n            x1 = ref[0];\r\n            y1 = ref[1];\r\n          }\r\n          let ob = this._bezierTo(x1, y1, x2, y2, x, y, path, o);\r\n          ops = ops.concat(ob);\r\n          path.bezierReflectionPoint = [x + (x - x2), y + (y - y2)];\r\n        }\r\n        break;\r\n      }\r\n      case 'Q':\r\n      case 'q': {\r\n        const delta = seg.key === 'q';\r\n        if (seg.data.length >= 4) {\r\n          let x1 = +seg.data[0];\r\n          let y1 = +seg.data[1];\r\n          let x = +seg.data[2];\r\n          let y = +seg.data[3];\r\n          if (delta) {\r\n            x1 += path.x;\r\n            x += path.x;\r\n            y1 += path.y;\r\n            y += path.y;\r\n          }\r\n          let offset1 = 1 * (1 + o.roughness * 0.2);\r\n          let offset2 = 1.5 * (1 + o.roughness * 0.22);\r\n          ops.push({ op: 'move', data: [path.x + this._getOffset(-offset1, offset1, o), path.y + this._getOffset(-offset1, offset1, o)] });\r\n          let f = [x + this._getOffset(-offset1, offset1, o), y + this._getOffset(-offset1, offset1, o)];\r\n          ops.push({\r\n            op: 'qcurveTo', data: [\r\n              x1 + this._getOffset(-offset1, offset1, o), y1 + this._getOffset(-offset1, offset1, o),\r\n              f[0], f[1]\r\n            ]\r\n          });\r\n          ops.push({ op: 'move', data: [path.x + this._getOffset(-offset2, offset2, o), path.y + this._getOffset(-offset2, offset2, o)] });\r\n          f = [x + this._getOffset(-offset2, offset2, o), y + this._getOffset(-offset2, offset2, o)];\r\n          ops.push({\r\n            op: 'qcurveTo', data: [\r\n              x1 + this._getOffset(-offset2, offset2, o), y1 + this._getOffset(-offset2, offset2, o),\r\n              f[0], f[1]\r\n            ]\r\n          });\r\n          path.setPosition(f[0], f[1]);\r\n          path.quadReflectionPoint = [x + (x - x1), y + (y - y1)];\r\n        }\r\n        break;\r\n      }\r\n      case 'T':\r\n      case 't': {\r\n        const delta = seg.key === 't';\r\n        if (seg.data.length >= 2) {\r\n          let x = +seg.data[0];\r\n          let y = +seg.data[1];\r\n          if (delta) {\r\n            x += path.x;\r\n            y += path.y;\r\n          }\r\n          let x1 = x;\r\n          let y1 = y;\r\n          let prevKey = prevSeg ? prevSeg.key : \"\";\r\n          var ref = null;\r\n          if (prevKey == 'q' || prevKey == 'Q' || prevKey == 't' || prevKey == 'T') {\r\n            ref = path.quadReflectionPoint;\r\n          }\r\n          if (ref) {\r\n            x1 = ref[0];\r\n            y1 = ref[1];\r\n          }\r\n          let offset1 = 1 * (1 + o.roughness * 0.2);\r\n          let offset2 = 1.5 * (1 + o.roughness * 0.22);\r\n          ops.push({ op: 'move', data: [path.x + this._getOffset(-offset1, offset1, o), path.y + this._getOffset(-offset1, offset1, o)] });\r\n          let f = [x + this._getOffset(-offset1, offset1, o), y + this._getOffset(-offset1, offset1, o)];\r\n          ops.push({\r\n            op: 'qcurveTo', data: [\r\n              x1 + this._getOffset(-offset1, offset1, o), y1 + this._getOffset(-offset1, offset1, o),\r\n              f[0], f[1]\r\n            ]\r\n          });\r\n          ops.push({ op: 'move', data: [path.x + this._getOffset(-offset2, offset2, o), path.y + this._getOffset(-offset2, offset2, o)] });\r\n          f = [x + this._getOffset(-offset2, offset2, o), y + this._getOffset(-offset2, offset2, o)];\r\n          ops.push({\r\n            op: 'qcurveTo', data: [\r\n              x1 + this._getOffset(-offset2, offset2, o), y1 + this._getOffset(-offset2, offset2, o),\r\n              f[0], f[1]\r\n            ]\r\n          });\r\n          path.setPosition(f[0], f[1]);\r\n          path.quadReflectionPoint = [x + (x - x1), y + (y - y1)];\r\n        }\r\n        break;\r\n      }\r\n      case 'A':\r\n      case 'a': {\r\n        const delta = seg.key === 'a';\r\n        if (seg.data.length >= 7) {\r\n          let rx = +seg.data[0];\r\n          let ry = +seg.data[1];\r\n          let angle = +seg.data[2];\r\n          let largeArcFlag = +seg.data[3];\r\n          let sweepFlag = +seg.data[4];\r\n          let x = +seg.data[5];\r\n          let y = +seg.data[6];\r\n          if (delta) {\r\n            x += path.x;\r\n            y += path.y;\r\n          }\r\n          if (x == path.x && y == path.y) {\r\n            break;\r\n          }\r\n          if (rx == 0 || ry == 0) {\r\n            ops = ops.concat(this._doubleLine(path.x, path.y, x, y, o));\r\n            path.setPosition(x, y);\r\n          } else {\r\n            let final = null;\r\n            let ro = o.maxRandomnessOffset || 0;\r\n            for (let i = 0; i < 1; i++) {\r\n              let arcConverter = new RoughArcConverter(\r\n                [path.x, path.y],\r\n                [x, y],\r\n                [rx, ry],\r\n                angle,\r\n                largeArcFlag ? true : false,\r\n                sweepFlag ? true : false\r\n              );\r\n              let segment = arcConverter.getNextSegment();\r\n              while (segment) {\r\n                let ob = this._bezierTo(segment.cp1[0], segment.cp1[1], segment.cp2[0], segment.cp2[1], segment.to[0], segment.to[1], path, o);\r\n                ops = ops.concat(ob);\r\n                segment = arcConverter.getNextSegment();\r\n              }\r\n            }\r\n          }\r\n        }\r\n        break;\r\n      }\r\n      default:\r\n        break;\r\n    }\r\n    return ops;\r\n  }\r\n\r\n  _getOffset(min, max, ops) {\r\n    return ops.roughness * ((Math.random() * (max - min)) + min);\r\n  }\r\n\r\n  _affine(x, y, cx, cy, sinAnglePrime, cosAnglePrime, R) {\r\n    var A = -cx * cosAnglePrime - cy * sinAnglePrime + cx;\r\n    var B = R * (cx * sinAnglePrime - cy * cosAnglePrime) + cy;\r\n    var C = cosAnglePrime;\r\n    var D = sinAnglePrime;\r\n    var E = -R * sinAnglePrime;\r\n    var F = R * cosAnglePrime;\r\n    return [\r\n      A + C * x + D * y,\r\n      B + E * x + F * y\r\n    ];\r\n  }\r\n\r\n  _doubleLine(x1, y1, x2, y2, o) {\r\n    const o1 = this._line(x1, y1, x2, y2, o, true, false);\r\n    const o2 = this._line(x1, y1, x2, y2, o, true, true);\r\n    return o1.concat(o2);\r\n  }\r\n\r\n  _line(x1, y1, x2, y2, o, move, overlay) {\r\n    const lengthSq = Math.pow((x1 - x2), 2) + Math.pow((y1 - y2), 2);\r\n    let offset = o.maxRandomnessOffset || 0;\r\n    if ((offset * offset * 100) > lengthSq) {\r\n      offset = Math.sqrt(lengthSq) / 10;\r\n    }\r\n    const halfOffset = offset / 2;\r\n    const divergePoint = 0.2 + Math.random() * 0.2;\r\n    let midDispX = o.bowing * o.maxRandomnessOffset * (y2 - y1) / 200;\r\n    let midDispY = o.bowing * o.maxRandomnessOffset * (x1 - x2) / 200;\r\n    midDispX = this._getOffset(-midDispX, midDispX, o);\r\n    midDispY = this._getOffset(-midDispY, midDispY, o);\r\n    let ops = [];\r\n    if (move) {\r\n      if (overlay) {\r\n        ops.push({\r\n          op: 'move', data: [\r\n            x1 + this._getOffset(-halfOffset, halfOffset, o),\r\n            y1 + this._getOffset(-halfOffset, halfOffset, o)\r\n          ]\r\n        });\r\n      } else {\r\n        ops.push({\r\n          op: 'move', data: [\r\n            x1 + this._getOffset(-offset, offset, o),\r\n            y1 + this._getOffset(-offset, offset, o)\r\n          ]\r\n        });\r\n      }\r\n    }\r\n    if (overlay) {\r\n      ops.push({\r\n        op: 'bcurveTo', data: [\r\n          midDispX + x1 + (x2 - x1) * divergePoint + this._getOffset(-halfOffset, halfOffset, o),\r\n          midDispY + y1 + (y2 - y1) * divergePoint + this._getOffset(-halfOffset, halfOffset, o),\r\n          midDispX + x1 + 2 * (x2 - x1) * divergePoint + this._getOffset(-halfOffset, halfOffset, o),\r\n          midDispY + y1 + 2 * (y2 - y1) * divergePoint + this._getOffset(-halfOffset, halfOffset, o),\r\n          x2 + this._getOffset(-halfOffset, halfOffset, o),\r\n          y2 + this._getOffset(-halfOffset, halfOffset, o)\r\n        ]\r\n      });\r\n    } else {\r\n      ops.push({\r\n        op: 'bcurveTo', data: [\r\n          midDispX + x1 + (x2 - x1) * divergePoint + this._getOffset(-offset, offset, o),\r\n          midDispY + y1 + (y2 - y1) * divergePoint + this._getOffset(-offset, offset, o),\r\n          midDispX + x1 + 2 * (x2 - x1) * divergePoint + this._getOffset(-offset, offset, o),\r\n          midDispY + y1 + 2 * (y2 - y1) * divergePoint + this._getOffset(-offset, offset, o),\r\n          x2 + this._getOffset(-offset, offset, o),\r\n          y2 + this._getOffset(-offset, offset, o)\r\n        ]\r\n      });\r\n    }\r\n    return ops;\r\n  }\r\n\r\n  _curve(points, closePoint, o) {\r\n    const len = points.length;\r\n    let ops = [];\r\n    if (len > 3) {\r\n      const b = [];\r\n      const s = 1 - o.curveTightness;\r\n      ops.push({ op: 'move', data: [points[1][0], points[1][1]] });\r\n      for (let i = 1; (i + 2) < len; i++) {\r\n        const cachedVertArray = points[i];\r\n        b[0] = [cachedVertArray[0], cachedVertArray[1]];\r\n        b[1] = [cachedVertArray[0] + (s * points[i + 1][0] - s * points[i - 1][0]) / 6, cachedVertArray[1] + (s * points[i + 1][1] - s * points[i - 1][1]) / 6];\r\n        b[2] = [points[i + 1][0] + (s * points[i][0] - s * points[i + 2][0]) / 6, points[i + 1][1] + (s * points[i][1] - s * points[i + 2][1]) / 6];\r\n        b[3] = [points[i + 1][0], points[i + 1][1]];\r\n        ops.push({ op: 'bcurveTo', data: [b[1][0], b[1][1], b[2][0], b[2][1], b[3][0], b[3][1]] });\r\n      }\r\n      if (closePoint && closePoint.length === 2) {\r\n        let ro = o.maxRandomnessOffset;\r\n        // TODO: more roughness here?\r\n        ops.push({ ops: 'lineTo', data: [closePoint[0] + this._getOffset(-ro, ro, o), closePoint[1] + + this._getOffset(-ro, ro, o)] });\r\n      }\r\n    } else if (len === 3) {\r\n      ops.push({ op: 'move', data: [points[1][0], points[1][1]] });\r\n      ops.push({\r\n        op: 'bcurveTo', data: [\r\n          points[1][0], points[1][1],\r\n          points[2][0], points[2][1],\r\n          points[2][0], points[2][1]]\r\n      });\r\n    } else if (len === 2) {\r\n      ops = ops.concat(this._doubleLine(points[0][0], points[0][1], points[1][0], points[1][1], o));\r\n    }\r\n    return ops;\r\n  }\r\n\r\n  _ellipse(increment, cx, cy, rx, ry, offset, overlap, o) {\r\n    const radOffset = this._getOffset(-0.5, 0.5, o) - (Math.PI / 2);\r\n    const points = [];\r\n    points.push([\r\n      this._getOffset(-offset, offset, o) + cx + 0.9 * rx * Math.cos(radOffset - increment),\r\n      this._getOffset(-offset, offset, o) + cy + 0.9 * ry * Math.sin(radOffset - increment)\r\n    ]);\r\n    for (let angle = radOffset; angle < (Math.PI * 2 + radOffset - 0.01); angle = angle + increment) {\r\n      points.push([\r\n        this._getOffset(-offset, offset, o) + cx + rx * Math.cos(angle),\r\n        this._getOffset(-offset, offset, o) + cy + ry * Math.sin(angle)\r\n      ]);\r\n    }\r\n    points.push([\r\n      this._getOffset(-offset, offset, o) + cx + rx * Math.cos(radOffset + Math.PI * 2 + overlap * 0.5),\r\n      this._getOffset(-offset, offset, o) + cy + ry * Math.sin(radOffset + Math.PI * 2 + overlap * 0.5)\r\n    ]);\r\n    points.push([\r\n      this._getOffset(-offset, offset, o) + cx + 0.98 * rx * Math.cos(radOffset + overlap),\r\n      this._getOffset(-offset, offset, o) + cy + 0.98 * ry * Math.sin(radOffset + overlap)\r\n    ]);\r\n    points.push([\r\n      this._getOffset(-offset, offset, o) + cx + 0.9 * rx * Math.cos(radOffset + overlap * 0.5),\r\n      this._getOffset(-offset, offset, o) + cy + 0.9 * ry * Math.sin(radOffset + overlap * 0.5)\r\n    ]);\r\n    return this._curve(points, null, o);\r\n  }\r\n\r\n  _curveWithOffset(points, offset, o) {\r\n    const ps = [];\r\n    ps.push([\r\n      points[0][0] + this._getOffset(-offset, offset, o),\r\n      points[0][1] + this._getOffset(-offset, offset, o),\r\n    ]);\r\n    ps.push([\r\n      points[0][0] + this._getOffset(-offset, offset, o),\r\n      points[0][1] + this._getOffset(-offset, offset, o),\r\n    ]);\r\n    for (let i = 1; i < points.length; i++) {\r\n      ps.push([\r\n        points[i][0] + this._getOffset(-offset, offset, o),\r\n        points[i][1] + this._getOffset(-offset, offset, o),\r\n      ]);\r\n      if (i === (points.length - 1)) {\r\n        ps.push([\r\n          points[i][0] + this._getOffset(-offset, offset, o),\r\n          points[i][1] + this._getOffset(-offset, offset, o),\r\n        ]);\r\n      }\r\n    }\r\n    return this._curve(ps, null, o);\r\n  }\r\n\r\n  _arc(increment, cx, cy, rx, ry, strt, stp, offset, o) {\r\n    const radOffset = strt + this._getOffset(-0.1, 0.1, o);\r\n    const points = [];\r\n    points.push([\r\n      this._getOffset(-offset, offset, o) + cx + 0.9 * rx * Math.cos(radOffset - increment),\r\n      this._getOffset(-offset, offset, o) + cy + 0.9 * ry * Math.sin(radOffset - increment)\r\n    ]);\r\n    for (let angle = radOffset; angle <= stp; angle = angle + increment) {\r\n      points.push([\r\n        this._getOffset(-offset, offset, o) + cx + rx * Math.cos(angle),\r\n        this._getOffset(-offset, offset, o) + cy + ry * Math.sin(angle)\r\n      ]);\r\n    }\r\n    points.push([\r\n      cx + rx * Math.cos(stp),\r\n      cy + ry * Math.sin(stp)\r\n    ]);\r\n    points.push([\r\n      cx + rx * Math.cos(stp),\r\n      cy + ry * Math.sin(stp)\r\n    ]);\r\n    return this._curve(points, null, o);\r\n  }\r\n\r\n  _getIntersectingLines(lineCoords, xCoords, yCoords) {\r\n    let intersections = [];\r\n    var s1 = new RoughSegment(lineCoords[0], lineCoords[1], lineCoords[2], lineCoords[3]);\r\n    for (var i = 0; i < xCoords.length; i++) {\r\n      let s2 = new RoughSegment(xCoords[i], yCoords[i], xCoords[(i + 1) % xCoords.length], yCoords[(i + 1) % xCoords.length]);\r\n      if (s1.compare(s2) == RoughSegmentRelation().INTERSECTS) {\r\n        intersections.push([s1.xi, s1.yi]);\r\n      }\r\n    }\r\n    return intersections;\r\n  }\r\n}","import { RoughRenderer } from './renderer.js';\r\nself._roughScript = self.document && self.document.currentScript && self.document.currentScript.src;\r\n\r\nexport class RoughGenerator {\r\n  constructor(config, canvas) {\r\n    this.config = config || {};\r\n    this.canvas = canvas;\r\n    this.defaultOptions = {\r\n      maxRandomnessOffset: 2,\r\n      roughness: 1,\r\n      bowing: 1,\r\n      stroke: '#000',\r\n      strokeWidth: 1,\r\n      curveTightness: 0,\r\n      curveStepCount: 9,\r\n      fill: null,\r\n      fillStyle: 'hachure',\r\n      fillWeight: -1,\r\n      hachureAngle: -41,\r\n      hachureGap: -1\r\n    };\r\n    if (this.config.options) {\r\n      this.defaultOptions = this._options(this.config.options);\r\n    }\r\n  }\r\n\r\n  _options(options) {\r\n    return options ? Object.assign({}, this.defaultOptions, options) : this.defaultOptions;\r\n  }\r\n\r\n  _drawable(shape, sets, options) {\r\n    return { shape, sets: sets || [], options: options || this.defaultOptions };\r\n  }\r\n\r\n  get lib() {\r\n    if (!this._renderer) {\r\n      if (self && self.workly && this.config.async && (!this.config.noWorker)) {\r\n        const tos = Function.prototype.toString;\r\n        const worklySource = this.config.worklyURL || 'https://cdn.jsdelivr.net/gh/pshihn/workly/dist/workly.min.js';\r\n        const rendererSource = this.config.roughURL || self._roughScript;\r\n        if (rendererSource && worklySource) {\r\n          let code = `importScripts('${worklySource}', '${rendererSource}');\\nworkly.expose(self.rough.createRenderer());`;\r\n          let ourl = URL.createObjectURL(new Blob([code]));\r\n          this._renderer = workly.proxy(ourl);\r\n        } else {\r\n          this._renderer = new RoughRenderer();\r\n        }\r\n      } else {\r\n        this._renderer = new RoughRenderer();\r\n      }\r\n    }\r\n    return this._renderer;\r\n  }\r\n\r\n  line(x1, y1, x2, y2, options) {\r\n    const o = this._options(options);\r\n    return this._drawable('line', [this.lib.line(x1, y1, x2, y2, o)], o);\r\n  }\r\n\r\n  rectangle(x, y, width, height, options) {\r\n    const o = this._options(options);\r\n    const paths = [];\r\n    if (o.fill) {\r\n      const xc = [x, x + width, x + width, x];\r\n      const yc = [y, y, y + height, y + height];\r\n      if (o.fillStyle === 'solid') {\r\n        paths.push(this.lib.solidFillShape(xc, yc, o))\r\n      } else {\r\n        paths.push(this.lib.hachureFillShape(xc, yc, o));\r\n      }\r\n    }\r\n    paths.push(this.lib.rectangle(x, y, width, height, o));\r\n    return this._drawable('rectangle', paths, o);\r\n  }\r\n\r\n  ellipse(x, y, width, height, options) {\r\n    const o = this._options(options);\r\n    const paths = [];\r\n    if (o.fill) {\r\n      if (o.fillStyle === 'solid') {\r\n        const shape = this.lib.ellipse(x, y, width, height, o);\r\n        shape.type = 'fillPath';\r\n        paths.push(shape);\r\n      } else {\r\n        paths.push(this.lib.hachureFillEllipse(x, y, width, height, o));\r\n      }\r\n    }\r\n    paths.push(this.lib.ellipse(x, y, width, height, o));\r\n    return this._drawable('ellipse', paths, o);\r\n  }\r\n\r\n  circle(x, y, diameter, options) {\r\n    let ret = this.ellipse(x, y, diameter, diameter, options);\r\n    ret.shape = 'circle';\r\n    return ret;\r\n  }\r\n\r\n  linearPath(points, options) {\r\n    const o = this._options(options);\r\n    return this._drawable('linearPath', [this.lib.linearPath(points, false, o)], o);\r\n  }\r\n\r\n  polygon(points, options) {\r\n    const o = this._options(options);\r\n    const paths = [];\r\n    if (o.fill) {\r\n      let xc = [], yc = [];\r\n      for (let p of points) {\r\n        xc.push(p[0]);\r\n        yc.push(p[1]);\r\n      }\r\n      if (o.fillStyle === 'solid') {\r\n        paths.push(this.lib.solidFillShape(xc, yc, o));\r\n      } else {\r\n        paths.push(this.lib.hachureFillShape(xc, yc, o));\r\n      }\r\n    }\r\n    paths.push(this.lib.linearPath(points, true, o));\r\n    return this._drawable('polygon', paths, o);\r\n  }\r\n\r\n  arc(x, y, width, height, start, stop, closed, options) {\r\n    const o = this._options(options);\r\n    const paths = [];\r\n    if (closed && o.fill) {\r\n      if (o.fillStyle === 'solid') {\r\n        let shape = this.lib.arc(x, y, width, height, start, stop, true, false, o);\r\n        shape.type = 'fillPath';\r\n        paths.push(shape);\r\n      } else {\r\n        paths.push(this.lib.hachureFillArc(x, y, width, height, start, stop, o));\r\n      }\r\n    }\r\n    paths.push(this.lib.arc(x, y, width, height, start, stop, closed, true, o));\r\n    return this._drawable('arc', paths, o);\r\n  }\r\n\r\n  curve(points, options) {\r\n    const o = this._options(options);\r\n    return this._drawable('curve', [this.lib.curve(points, o)], o);\r\n  }\r\n\r\n  path(d, options) {\r\n    const o = this._options(options);\r\n    const paths = [];\r\n    if (!d) {\r\n      return this._drawable('path', paths, o);\r\n    }\r\n    if (o.fill) {\r\n      if (o.fillStyle === 'solid') {\r\n        let shape = { type: 'path2Dfill', path: d };\r\n        paths.push(shape);\r\n      } else {\r\n        const size = this._computePathSize(d);\r\n        let xc = [0, size[0], size[0], 0];\r\n        let yc = [0, 0, size[1], size[1]];\r\n        let shape = this.lib.hachureFillShape(xc, yc, o);\r\n        shape.type = 'path2Dpattern';\r\n        shape.size = size;\r\n        shape.path = d;\r\n        paths.push(shape);\r\n      }\r\n    }\r\n    paths.push(this.lib.svgPath(d, o));\r\n    return this._drawable('path', paths, o);\r\n  }\r\n\r\n  toPaths(drawable) {\r\n    const sets = drawable.sets || [];\r\n    const o = drawable.options || this.defaultOptions;\r\n    const paths = [];\r\n    for (const drawing of sets) {\r\n      let path = null;\r\n      switch (drawing.type) {\r\n        case 'path':\r\n          path = {\r\n            d: this.opsToPath(drawing),\r\n            stroke: o.stroke,\r\n            strokeWidth: o.strokeWidth,\r\n            fill: 'none'\r\n          };\r\n          break;\r\n        case 'fillPath':\r\n          path = {\r\n            d: this.opsToPath(drawing),\r\n            stroke: 'none',\r\n            strokeWidth: 0,\r\n            fill: o.fill\r\n          };\r\n          break;\r\n        case 'fillSketch':\r\n          path = this._fillSketch(drawing, o);\r\n          break;\r\n        case 'path2Dfill':\r\n          path = {\r\n            d: drawing.path,\r\n            stroke: 'none',\r\n            strokeWidth: 0,\r\n            fill: o.fill\r\n          };\r\n          break;\r\n        case 'path2Dpattern': {\r\n          const size = drawing.size;\r\n          const pattern = {\r\n            x: 0, y: 0, width: 1, height: 1,\r\n            viewBox: `0 0 ${Math.round(size[0])} ${Math.round(size[1])}`,\r\n            patternUnits: 'objectBoundingBox',\r\n            path: this._fillSketch(drawing, o)\r\n          };\r\n          path = {\r\n            d: drawing.path,\r\n            stroke: 'none',\r\n            strokeWidth: 0,\r\n            pattern: pattern\r\n          };\r\n          break;\r\n        }\r\n      }\r\n      if (path) {\r\n        paths.push(path);\r\n      }\r\n    }\r\n    return paths;\r\n  }\r\n\r\n  _fillSketch(drawing, o) {\r\n    let fweight = o.fillWeight;\r\n    if (fweight < 0) {\r\n      fweight = o.strokeWidth / 2;\r\n    }\r\n    return {\r\n      d: this.opsToPath(drawing),\r\n      stroke: o.fill,\r\n      strokeWidth: fweight,\r\n      fill: 'none'\r\n    };\r\n  }\r\n\r\n  opsToPath(drawing) {\r\n    let path = '';\r\n    for (let item of drawing.ops) {\r\n      const data = item.data;\r\n      switch (item.op) {\r\n        case 'move':\r\n          path += `M${data[0]} ${data[1]} `;\r\n          break;\r\n        case 'bcurveTo':\r\n          path += `C${data[0]} ${data[1]}, ${data[2]} ${data[3]}, ${data[4]} ${data[5]} `;\r\n          break;\r\n        case 'qcurveTo':\r\n          path += `Q${data[0]} ${data[1]}, ${data[2]} ${data[3]} `;\r\n          break;\r\n        case 'lineTo':\r\n          path += `L${data[0]} ${data[1]} `;\r\n          break;\r\n      }\r\n    }\r\n    return path.trim();\r\n  }\r\n\r\n  _computePathSize(d) {\r\n    let size = [0, 0];\r\n    if (self.document) {\r\n      try {\r\n        const ns = \"http://www.w3.org/2000/svg\";\r\n        let svg = self.document.createElementNS(ns, \"svg\");\r\n        svg.setAttribute(\"width\", \"0\");\r\n        svg.setAttribute(\"height\", \"0\");\r\n        let pathNode = self.document.createElementNS(ns, \"path\");\r\n        pathNode.setAttribute('d', d);\r\n        svg.appendChild(pathNode);\r\n        self.document.body.appendChild(svg);\r\n        let bb = pathNode.getBBox()\r\n        if (bb) {\r\n          size[0] = bb.width || 0;\r\n          size[1] = bb.height || 0;\r\n        }\r\n        self.document.body.removeChild(svg);\r\n      } catch (err) { }\r\n    }\r\n    const canvasSize = this._canvasSize();\r\n    if (!(size[0] * size[1])) {\r\n      size = canvasSize;\r\n    }\r\n    size[0] = Math.min(size[0], canvasSize[0]);\r\n    size[1] = Math.min(size[1], canvasSize[1]);\r\n    return size;\r\n  }\r\n\r\n  _canvasSize() {\r\n    const val = w => {\r\n      if (w) {\r\n        if (typeof w === 'object') {\r\n          if (w.baseVal && w.baseVal.value) {\r\n            return w.baseVal.value;\r\n          }\r\n        }\r\n      }\r\n      return w || 100;\r\n    };\r\n    return this.canvas ? [val(this.canvas.width), val(this.canvas.height)] : [100, 100];\r\n  }\r\n}\r\n\r\nexport class RoughGeneratorAsync extends RoughGenerator {\r\n  async line(x1, y1, x2, y2, options) {\r\n    const o = this._options(options);\r\n    return this._drawable('line', [await this.lib.line(x1, y1, x2, y2, o)], o);\r\n  }\r\n\r\n  async rectangle(x, y, width, height, options) {\r\n    const o = this._options(options);\r\n    const paths = [];\r\n    if (o.fill) {\r\n      const xc = [x, x + width, x + width, x];\r\n      const yc = [y, y, y + height, y + height];\r\n      if (o.fillStyle === 'solid') {\r\n        paths.push(await this.lib.solidFillShape(xc, yc, o))\r\n      } else {\r\n        paths.push(await this.lib.hachureFillShape(xc, yc, o));\r\n      }\r\n    }\r\n    paths.push(await this.lib.rectangle(x, y, width, height, o));\r\n    return this._drawable('rectangle', paths, o);\r\n  }\r\n\r\n  async ellipse(x, y, width, height, options) {\r\n    const o = this._options(options);\r\n    const paths = [];\r\n    if (o.fill) {\r\n      if (o.fillStyle === 'solid') {\r\n        const shape = await this.lib.ellipse(x, y, width, height, o);\r\n        shape.type = 'fillPath';\r\n        paths.push(shape);\r\n      } else {\r\n        paths.push(await this.lib.hachureFillEllipse(x, y, width, height, o));\r\n      }\r\n    }\r\n    paths.push(await this.lib.ellipse(x, y, width, height, o));\r\n    return this._drawable('ellipse', paths, o);\r\n  }\r\n\r\n  async circle(x, y, diameter, options) {\r\n    let ret = await this.ellipse(x, y, diameter, diameter, options);\r\n    ret.shape = 'circle';\r\n    return ret;\r\n  }\r\n\r\n  async linearPath(points, options) {\r\n    const o = this._options(options);\r\n    return this._drawable('linearPath', [await this.lib.linearPath(points, false, o)], o);\r\n  }\r\n\r\n  async polygon(points, options) {\r\n    const o = this._options(options);\r\n    const paths = [];\r\n    if (o.fill) {\r\n      let xc = [], yc = [];\r\n      for (let p of points) {\r\n        xc.push(p[0]);\r\n        yc.push(p[1]);\r\n      }\r\n      if (o.fillStyle === 'solid') {\r\n        paths.push(await this.lib.solidFillShape(xc, yc, o));\r\n      } else {\r\n        paths.push(await this.lib.hachureFillShape(xc, yc, o));\r\n      }\r\n    }\r\n    paths.push(await this.lib.linearPath(points, true, o));\r\n    return this._drawable('polygon', paths, o);\r\n  }\r\n\r\n  async arc(x, y, width, height, start, stop, closed, options) {\r\n    const o = this._options(options);\r\n    const paths = [];\r\n    if (closed && o.fill) {\r\n      if (o.fillStyle === 'solid') {\r\n        let shape = await this.lib.arc(x, y, width, height, start, stop, true, false, o);\r\n        shape.type = 'fillPath';\r\n        paths.push(shape);\r\n      } else {\r\n        paths.push(await this.lib.hachureFillArc(x, y, width, height, start, stop, o));\r\n      }\r\n    }\r\n    paths.push(await this.lib.arc(x, y, width, height, start, stop, closed, true, o));\r\n    return this._drawable('arc', paths, o);\r\n  }\r\n\r\n  async curve(points, options) {\r\n    const o = this._options(options);\r\n    return this._drawable('curve', [await this.lib.curve(points, o)], o);\r\n  }\r\n\r\n  async path(d, options) {\r\n    const o = this._options(options);\r\n    const paths = [];\r\n    if (!d) {\r\n      return this._drawable('path', paths, o);\r\n    }\r\n    if (o.fill) {\r\n      if (o.fillStyle === 'solid') {\r\n        let shape = { type: 'path2Dfill', path: d };\r\n        paths.push(shape);\r\n      } else {\r\n        const size = this._computePathSize(d);\r\n        let xc = [0, size[0], size[0], 0];\r\n        let yc = [0, 0, size[1], size[1]];\r\n        let shape = await this.lib.hachureFillShape(xc, yc, o);\r\n        shape.type = 'path2Dpattern';\r\n        shape.size = size;\r\n        shape.path = d;\r\n        paths.push(shape);\r\n      }\r\n    }\r\n    paths.push(await this.lib.svgPath(d, o));\r\n    return this._drawable('path', paths, o);\r\n  }\r\n}","import { RoughGenerator, RoughGeneratorAsync } from './generator.js'\r\nimport { RoughRenderer } from './renderer.js';\r\n\r\nexport class RoughCanvas {\r\n  constructor(canvas, config) {\r\n    this.canvas = canvas;\r\n    this.ctx = this.canvas.getContext(\"2d\");\r\n    this._init(config);\r\n  }\r\n\r\n  _init(config) {\r\n    this.gen = new RoughGenerator(config, this.canvas);\r\n  }\r\n\r\n  get generator() {\r\n    return this.gen;\r\n  }\r\n\r\n  static createRenderer() {\r\n    return new RoughRenderer();\r\n  }\r\n\r\n  line(x1, y1, x2, y2, options) {\r\n    let d = this.gen.line(x1, y1, x2, y2, options);\r\n    this.draw(d);\r\n    return d;\r\n  }\r\n\r\n  rectangle(x, y, width, height, options) {\r\n    let d = this.gen.rectangle(x, y, width, height, options);\r\n    this.draw(d);\r\n    return d;\r\n  }\r\n\r\n  ellipse(x, y, width, height, options) {\r\n    let d = this.gen.ellipse(x, y, width, height, options);\r\n    this.draw(d);\r\n    return d;\r\n  }\r\n\r\n  circle(x, y, diameter, options) {\r\n    let d = this.gen.circle(x, y, diameter, options);\r\n    this.draw(d);\r\n    return d;\r\n  }\r\n\r\n  linearPath(points, options) {\r\n    let d = this.gen.linearPath(points, options);\r\n    this.draw(d);\r\n    return d;\r\n  }\r\n\r\n  polygon(points, options) {\r\n    let d = this.gen.polygon(points, options);\r\n    this.draw(d);\r\n    return d;\r\n  }\r\n\r\n  arc(x, y, width, height, start, stop, closed, options) {\r\n    let d = this.gen.arc(x, y, width, height, start, stop, closed, options);\r\n    this.draw(d);\r\n    return d;\r\n  }\r\n\r\n  curve(points, options) {\r\n    let d = this.gen.curve(points, options);\r\n    this.draw(d);\r\n    return d;\r\n  }\r\n\r\n  path(d, options) {\r\n    let drawing = this.gen.path(d, options);\r\n    this.draw(drawing);\r\n    return drawing;\r\n  }\r\n\r\n  draw(drawable) {\r\n    let sets = drawable.sets || [];\r\n    let o = drawable.options || this.gen.defaultOptions;\r\n    let ctx = this.ctx;\r\n    for (let drawing of sets) {\r\n      switch (drawing.type) {\r\n        case 'path':\r\n          ctx.save();\r\n          ctx.strokeStyle = o.stroke;\r\n          ctx.lineWidth = o.strokeWidth;\r\n          this._drawToContext(ctx, drawing);\r\n          ctx.restore();\r\n          break;\r\n        case 'fillPath':\r\n          ctx.save();\r\n          ctx.fillStyle = o.fill;\r\n          this._drawToContext(ctx, drawing, o);\r\n          ctx.restore();\r\n          break;\r\n        case 'fillSketch':\r\n          this._fillSketch(ctx, drawing, o);\r\n          break;\r\n        case 'path2Dfill': {\r\n          this.ctx.save();\r\n          this.ctx.fillStyle = o.fill;\r\n          let p2d = new Path2D(drawing.path);\r\n          this.ctx.fill(p2d);\r\n          this.ctx.restore();\r\n          break;\r\n        }\r\n        case 'path2Dpattern': {\r\n          let size = drawing.size;\r\n          const hcanvas = document.createElement('canvas');\r\n          const hcontext = hcanvas.getContext(\"2d\");\r\n          let bbox = this._computeBBox(drawing.path);\r\n          if (bbox && (bbox.width || bbox.height)) {\r\n            hcanvas.width = this.canvas.width;\r\n            hcanvas.height = this.canvas.height;\r\n            hcontext.translate(bbox.x || 0, bbox.y || 0);\r\n          } else {\r\n            hcanvas.width = size[0];\r\n            hcanvas.height = size[1];\r\n          }\r\n          this._fillSketch(hcontext, drawing, o);\r\n          this.ctx.save();\r\n          this.ctx.fillStyle = this.ctx.createPattern(hcanvas, 'repeat');\r\n          let p2d = new Path2D(drawing.path);\r\n          this.ctx.fill(p2d);\r\n          this.ctx.restore();\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _computeBBox(d) {\r\n    if (self.document) {\r\n      try {\r\n        const ns = \"http://www.w3.org/2000/svg\";\r\n        let svg = self.document.createElementNS(ns, \"svg\");\r\n        svg.setAttribute(\"width\", \"0\");\r\n        svg.setAttribute(\"height\", \"0\");\r\n        let pathNode = self.document.createElementNS(ns, \"path\");\r\n        pathNode.setAttribute('d', d);\r\n        svg.appendChild(pathNode);\r\n        self.document.body.appendChild(svg);\r\n        let bbox = pathNode.getBBox();\r\n        self.document.body.removeChild(svg);\r\n        return bbox;\r\n      } catch (err) { }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  _fillSketch(ctx, drawing, o) {\r\n    let fweight = o.fillWeight;\r\n    if (fweight < 0) {\r\n      fweight = o.strokeWidth / 2;\r\n    }\r\n    ctx.save();\r\n    ctx.strokeStyle = o.fill;\r\n    ctx.lineWidth = fweight;\r\n    this._drawToContext(ctx, drawing);\r\n    ctx.restore();\r\n  }\r\n\r\n  _drawToContext(ctx, drawing) {\r\n    ctx.beginPath();\r\n    for (let item of drawing.ops) {\r\n      const data = item.data;\r\n      switch (item.op) {\r\n        case 'move':\r\n          ctx.moveTo(data[0], data[1]);\r\n          break;\r\n        case 'bcurveTo':\r\n          ctx.bezierCurveTo(data[0], data[1], data[2], data[3], data[4], data[5]);\r\n          break;\r\n        case 'qcurveTo':\r\n          ctx.quadraticCurveTo(data[0], data[1], data[2], data[3]);\r\n          break;\r\n        case 'lineTo':\r\n          ctx.lineTo(data[0], data[1]);\r\n          break;\r\n      }\r\n    }\r\n    if (drawing.type === 'fillPath') {\r\n      ctx.fill();\r\n    } else {\r\n      ctx.stroke();\r\n    }\r\n  }\r\n}\r\n\r\nexport class RoughCanvasAsync extends RoughCanvas {\r\n  _init(config) {\r\n    this.gen = new RoughGeneratorAsync(config, this.canvas);\r\n  }\r\n\r\n  async line(x1, y1, x2, y2, options) {\r\n    let d = await this.gen.line(x1, y1, x2, y2, options);\r\n    this.draw(d);\r\n    return d;\r\n  }\r\n\r\n  async rectangle(x, y, width, height, options) {\r\n    let d = await this.gen.rectangle(x, y, width, height, options);\r\n    this.draw(d);\r\n    return d;\r\n  }\r\n\r\n  async ellipse(x, y, width, height, options) {\r\n    let d = await this.gen.ellipse(x, y, width, height, options);\r\n    this.draw(d);\r\n    return d;\r\n  }\r\n\r\n  async circle(x, y, diameter, options) {\r\n    let d = await this.gen.circle(x, y, diameter, options);\r\n    this.draw(d);\r\n    return d;\r\n  }\r\n\r\n  async linearPath(points, options) {\r\n    let d = await this.gen.linearPath(points, options);\r\n    this.draw(d);\r\n    return d;\r\n  }\r\n\r\n  async polygon(points, options) {\r\n    let d = await this.gen.polygon(points, options);\r\n    this.draw(d);\r\n    return d;\r\n  }\r\n\r\n  async arc(x, y, width, height, start, stop, closed, options) {\r\n    let d = await this.gen.arc(x, y, width, height, start, stop, closed, options);\r\n    this.draw(d);\r\n    return d;\r\n  }\r\n\r\n  async curve(points, options) {\r\n    let d = await this.gen.curve(points, options);\r\n    this.draw(d);\r\n    return d;\r\n  }\r\n\r\n  async path(d, options) {\r\n    let drawing = await this.gen.path(d, options);\r\n    this.draw(drawing);\r\n    return drawing;\r\n  }\r\n}","import { RoughGenerator, RoughGeneratorAsync } from './generator.js'\r\n\r\nexport class RoughSVG {\r\n  constructor(svg, config) {\r\n    this.svg = svg;\r\n    this._init(config);\r\n  }\r\n\r\n  _init(config) {\r\n    this.gen = new RoughGenerator(config, this.svg);\r\n  }\r\n\r\n  get generator() {\r\n    return this.gen;\r\n  }\r\n\r\n  get defs() {\r\n    if (!this._defs) {\r\n      let doc = this.svg.ownerDocument || document;\r\n      let dnode = doc.createElementNS('http://www.w3.org/2000/svg', 'defs');\r\n      if (this.svg.firstChild) {\r\n        this.svg.insertBefore(dnode, this.svg.firstChild);\r\n      } else {\r\n        this.svg.appendChild(dnode);\r\n      }\r\n      this._defs = dnode;\r\n    }\r\n    return this._defs;\r\n  }\r\n\r\n  line(x1, y1, x2, y2, options) {\r\n    let d = this.gen.line(x1, y1, x2, y2, options);\r\n    return this.draw(d);\r\n  }\r\n\r\n  rectangle(x, y, width, height, options) {\r\n    let d = this.gen.rectangle(x, y, width, height, options);\r\n    return this.draw(d);\r\n  }\r\n\r\n  ellipse(x, y, width, height, options) {\r\n    let d = this.gen.ellipse(x, y, width, height, options);\r\n    return this.draw(d);\r\n  }\r\n\r\n  circle(x, y, diameter, options) {\r\n    let d = this.gen.circle(x, y, diameter, options);\r\n    return this.draw(d);\r\n  }\r\n\r\n  linearPath(points, options) {\r\n    let d = this.gen.linearPath(points, options);\r\n    return this.draw(d);\r\n  }\r\n\r\n  polygon(points, options) {\r\n    let d = this.gen.polygon(points, options);\r\n    return this.draw(d);\r\n  }\r\n\r\n  arc(x, y, width, height, start, stop, closed, options) {\r\n    let d = this.gen.arc(x, y, width, height, start, stop, closed, options);\r\n    return this.draw(d);\r\n  }\r\n\r\n  curve(points, options) {\r\n    let d = this.gen.curve(points, options);\r\n    return this.draw(d);\r\n  }\r\n\r\n  path(d, options) {\r\n    let drawing = this.gen.path(d, options);\r\n    return this.draw(drawing);\r\n  }\r\n\r\n  draw(drawable) {\r\n    let sets = drawable.sets || [];\r\n    let o = drawable.options || this.gen.defaultOptions;\r\n    let doc = this.svg.ownerDocument || document;\r\n    let g = doc.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n    for (let drawing of sets) {\r\n      let path = null;\r\n      switch (drawing.type) {\r\n        case 'path': {\r\n          path = doc.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n          path.setAttribute('d', this._opsToPath(drawing));\r\n          path.style.stroke = o.stroke;\r\n          path.style.strokeWidth = o.strokeWidth;\r\n          path.style.fill = 'none';\r\n          break;\r\n        }\r\n        case 'fillPath': {\r\n          path = doc.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n          path.setAttribute('d', this._opsToPath(drawing));\r\n          path.style.stroke = 'none';\r\n          path.style.strokeWidth = 0;\r\n          path.style.fill = o.fill;\r\n          break;\r\n        }\r\n        case 'fillSketch': {\r\n          path = this._fillSketch(doc, drawing, o);\r\n          break;\r\n        }\r\n        case 'path2Dfill': {\r\n          path = doc.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n          path.setAttribute('d', drawing.path);\r\n          path.style.stroke = 'none';\r\n          path.style.strokeWidth = 0;\r\n          path.style.fill = o.fill;\r\n          break;\r\n        }\r\n        case 'path2Dpattern': {\r\n          const size = drawing.size;\r\n          const pattern = doc.createElementNS('http://www.w3.org/2000/svg', 'pattern');\r\n          const id = `rough-${Math.floor(Math.random() * (Number.MAX_SAFE_INTEGER || 999999))}`;\r\n          pattern.setAttribute('id', id);\r\n          pattern.setAttribute('x', 0);\r\n          pattern.setAttribute('y', 0);\r\n          pattern.setAttribute('width', 1);\r\n          pattern.setAttribute('height', 1);\r\n          pattern.setAttribute('height', 1);\r\n          pattern.setAttribute('viewBox', `0 0 ${Math.round(size[0])} ${Math.round(size[1])}`);\r\n          pattern.setAttribute('patternUnits', 'objectBoundingBox');\r\n          const patternPath = this._fillSketch(doc, drawing, o);\r\n          pattern.appendChild(patternPath);\r\n          this.defs.appendChild(pattern);\r\n\r\n          path = doc.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n          path.setAttribute('d', drawing.path);\r\n          path.style.stroke = 'none';\r\n          path.style.strokeWidth = 0;\r\n          path.style.fill = `url(#${id})`;\r\n          break;\r\n        }\r\n      }\r\n      if (path) {\r\n        g.appendChild(path);\r\n      }\r\n    }\r\n    return g;\r\n  }\r\n\r\n  _fillSketch(doc, drawing, o) {\r\n    let fweight = o.fillWeight;\r\n    if (fweight < 0) {\r\n      fweight = o.strokeWidth / 2;\r\n    }\r\n    let path = doc.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n    path.setAttribute('d', this._opsToPath(drawing));\r\n    path.style.stroke = o.fill;\r\n    path.style.strokeWidth = fweight;\r\n    path.style.fill = 'none';\r\n    return path;\r\n  }\r\n\r\n  _opsToPath(drawing) {\r\n    return this.gen.opsToPath(drawing);\r\n  }\r\n}\r\n\r\nexport class RoughSVGAsync extends RoughSVG {\r\n  _init(config) {\r\n    this.gen = new RoughGeneratorAsync(config, this.svg);\r\n  }\r\n\r\n  async line(x1, y1, x2, y2, options) {\r\n    let d = await this.gen.line(x1, y1, x2, y2, options);\r\n    return this.draw(d);\r\n  }\r\n\r\n  async rectangle(x, y, width, height, options) {\r\n    let d = await this.gen.rectangle(x, y, width, height, options);\r\n    return this.draw(d);\r\n  }\r\n\r\n  async ellipse(x, y, width, height, options) {\r\n    let d = await this.gen.ellipse(x, y, width, height, options);\r\n    return this.draw(d);\r\n  }\r\n\r\n  async circle(x, y, diameter, options) {\r\n    let d = await this.gen.circle(x, y, diameter, options);\r\n    return this.draw(d);\r\n  }\r\n\r\n  async linearPath(points, options) {\r\n    let d = await this.gen.linearPath(points, options);\r\n    return this.draw(d);\r\n  }\r\n\r\n  async polygon(points, options) {\r\n    let d = await this.gen.polygon(points, options);\r\n    return this.draw(d);\r\n  }\r\n\r\n  async arc(x, y, width, height, start, stop, closed, options) {\r\n    let d = await this.gen.arc(x, y, width, height, start, stop, closed, options);\r\n    return this.draw(d);\r\n  }\r\n\r\n  async curve(points, options) {\r\n    let d = await this.gen.curve(points, options);\r\n    return this.draw(d);\r\n  }\r\n\r\n  async path(d, options) {\r\n    let drawing = await this.gen.path(d, options);\r\n    return this.draw(drawing);\r\n  }\r\n}","import { RoughCanvas, RoughCanvasAsync } from './canvas.js';\r\nimport { RoughSVG, RoughSVGAsync } from './svg.js';\r\nimport { RoughGenerator, RoughGeneratorAsync } from './generator.js'\r\n\r\nexport default {\r\n  canvas(canvas, config) {\r\n    if (config && config.async) {\r\n      return new RoughCanvasAsync(canvas, config);\r\n    }\r\n    return new RoughCanvas(canvas, config);\r\n  },\r\n  svg(svg, config) {\r\n    if (config && config.async) {\r\n      return new RoughSVGAsync(svg, config);\r\n    }\r\n    return new RoughSVG(svg, config);\r\n  },\r\n  createRenderer() {\r\n    return RoughCanvas.createRenderer();\r\n  },\r\n  generator(config, size) {\r\n    if (config && config.async) {\r\n      return new RoughGeneratorAsync(config, size);\r\n    }\r\n    return new RoughGenerator(config, size);\r\n  }\r\n};"],"names":["RoughSegmentRelation","RoughSegment","px1","py1","px2","py2","RoughSegmentRelationConst","xi","Number","MAX_VALUE","yi","a","b","c","_undefined","otherSegment","isUndefined","UNDEFINED","grad1","grad2","int1","int2","Math","abs","SEPARATE","min","max","INTERSECTS","_getLength","x1","y1","x2","y2","dx","dy","sqrt","RoughHachureIterator","top","bottom","left","right","gap","sinAngle","cosAngle","tanAngle","pos","deltaX","hGap","sLeft","sRight","line","xLower","xUpper","yLower","yUpper","s","compare","PathToken","type","text","ParsedPath","d","PARAMS","COMMAND","NUMBER","EOD","segments","parseData","processPoints","first","prev","currentPoint","i","length","key","point","data","tokens","tokenize","index","token","mode","Array","isType","param_length","params","number","error","segment","push","match","substr","RegExp","$1","parseFloat","_closed","toLowerCase","RoughPath","parsed","_position","bezierReflectionPoint","quadReflectionPoint","_first","x","y","closed","_linearPoints","lp","points","v","RoughArcConverter","from","to","radii","angle","largeArcFlag","sweepFlag","radPerDeg","PI","_segIndex","_numSegs","_rx","_ry","_sinPhi","sin","_cosPhi","cos","x1dash","y1dash","root","numerator","cxdash","cydash","_C","_theta","calculateVectorAngle","dtheta","ceil","_delta","_T","_from","cp1","cp2","cosTheta1","sinTheta1","theta2","cosTheta2","sinTheta2","ux","uy","vx","vy","ta","atan2","tb","PathFitter","sets","simplification","outSets","set","estLength","floor","reduce","p1","p2","pow","count","slice","minArea","minIndex","distance","area","areas","splice","RoughRenderer","o","ops","_doubleLine","close","len","concat","linearPath","width","height","polygon","o1","_curveWithOffset","roughness","o2","increment","curveStepCount","rx","ry","_getOffset","_ellipse","start","stop","roughClosure","cx","cy","strt","stp","ellipseInc","arcInc","_arc","op","xc","yc","hachureFillShape","xCoords","yCoords","offset","maxRandomnessOffset","hachureAngle","hachureGap","strokeWidth","tan","it","rectCoords","getNextLine","lines","_getIntersectingLines","fweight","fillWeight","aspectRatio","hyp","sinAnglePrime","cosAnglePrime","gapPrime","halfLen","xPos","_affine","path","replace","p","fitter","linearPoints","fit","opList","_processSegment","ros","f","setPosition","seg","prevSeg","delta","ro","ob","_bezierTo","prevKey","ref","offset1","offset2","arcConverter","getNextSegment","random","R","A","B","C","D","E","F","_line","move","overlay","lengthSq","halfOffset","divergePoint","midDispX","bowing","midDispY","closePoint","curveTightness","cachedVertArray","overlap","radOffset","_curve","ps","lineCoords","intersections","s1","s2","self","_roughScript","document","currentScript","src","RoughGenerator","config","canvas","defaultOptions","options","_options","Object","assign","shape","_drawable","lib","paths","fill","fillStyle","solidFillShape","rectangle","ellipse","hachureFillEllipse","diameter","ret","arc","hachureFillArc","curve","size","_computePathSize","svgPath","drawable","drawing","opsToPath","stroke","_fillSketch","pattern","round","item","trim","ns","svg","createElementNS","setAttribute","pathNode","appendChild","body","bb","getBBox","removeChild","err","canvasSize","_canvasSize","val","w","baseVal","value","_renderer","workly","async","noWorker","tos","Function","prototype","toString","worklySource","worklyURL","rendererSource","roughURL","code","ourl","URL","createObjectURL","Blob","proxy","RoughGeneratorAsync","RoughCanvas","ctx","getContext","_init","gen","draw","circle","save","strokeStyle","lineWidth","_drawToContext","restore","p2d","Path2D","hcanvas","createElement","hcontext","bbox","_computeBBox","translate","createPattern","beginPath","moveTo","bezierCurveTo","quadraticCurveTo","lineTo","RoughCanvasAsync","RoughSVG","doc","ownerDocument","g","_opsToPath","style","id","MAX_SAFE_INTEGER","patternPath","defs","_defs","dnode","firstChild","insertBefore","RoughSVGAsync","createRenderer"],"mappings":"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"}